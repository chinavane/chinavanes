# 02.vuex 状态管理器的概念

如果一个大家族出现了内部沟通无法解决的障碍问题那么最好的办法是什么？我想最好的方式无非就是请外部的一个“和事佬”来做一个媒介，由“和事佬”做信息传递的中间转换层，这样可以极大信息传递的层次阻障。Vuex 就是这么一个”和事佬“，它是由 vue 官方提供的一个专为 Vue.js 应用程序开发的**状态管理模式 + 库**。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。利用 vuex 可以将任意层级的组件的数据内容进行存储，在其它不同层级的组件需要对应的数据的时候只需要直接从其数据仓库中进行获取与操作即可，这样的操作流程最多需要组件、仓库、组件这么几个流程节点就可以，最大限度的优化了组件之间的沟通成本与交互效率。

![vue3-book-17.vuex-02-利用中心状态管理机制进行组件通讯](http://qn.chinavanes.com/qiniu_picGo/vue3-book-17.vuex-02-%E5%88%A9%E7%94%A8%E4%B8%AD%E5%BF%83%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6%E8%BF%9B%E8%A1%8C%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF.png)



vuex 这一状态管理器中包含一些核心概念需要强化理解，总结起来主要包含 6 大方面：

| 内容      | 作用     | 映射         | 调用     | 其它                                                         |
| --------- | -------- | ------------ | -------- | ------------------------------------------------------------ |
| state     | 设置状态 | useState     |          |                                                              |
| getters   | 获取内容 | useGetters   |          | 计算数据后返回                                               |
| mutations | 修改数据 | useMutations | commit   | 可以异步<br />但不建议<br />不利调试                         |
| actions   | 异步操作 | useActions   | dispatch |                                                              |
| modules   | 模块拆分 |              |          | namespaced                                                   |
| plugins   | 插件辅助 |              |          | 扩展并增强 vuex 功能，<br />比如让仓库数据可以实现持久化存储 |

vuex状态管理器中从state设置状态开始，可以将state渲染于Vue Components的组件当中；

如果Vue Components中有需要进行Backend API后端接口处理等异步操作的内容并且需要通过vuex进行管理，则可以利用dispatch派发动作到vuex的Actions动作层，直接由Actions动作层进行Backend API的数据请求或者其它异步操作获取到最终数据。

但Vuex的Actions只负责异步动作执行，并不强调对原state数据的数据处理，所以想要实现将异步操作以后获取到的新数据对原state状态数据的修改则需要在Actions异步动作层中将数据commit到Mutations数据修改层次。

Vuex中唯一修改数据的位置就是在Mutations层，在Mutations层可以对state状态数据进行任意的Mutate变化。Mutations层支持数据的同步修改，至于异步是由Actions提交过来，但事实上并不是说Mutations层不能够实现异步数据修改，只是因为Vue DevTools调试工具对Mutations的异步更新监测结果不理想，所以不建议异步修改。不过，Mutations层最终都会利用新数据修改Vuex中state的原数据从而再次响应式的render渲染到Vue Components组件上，这就产生了一个循环。

![image-20221119073152533](http://qn.chinavanes.com/qiniu_picGo/image-20221119073152533.png)

不过，对于 vuex 这部分内容的学习可能会遇到如下一系列的问题：

- 如何安装使用 vuex，如何设置一共享状态数据，并实现数据的获取显示；
- 对于需要进行二次计算的状态数据可以采用什么样的方式操作；
- 怎么才能进行状态数据的修改操作，需要注意的事项有哪些；
- 对于有异步操作的接口请求需要在哪个层次处理，又有哪些操作模式；
- 如果项目规模扩大，vuex 的代码如何才能实现拆分，怎么才能进行不同模块的协调管理；
- 命名空间的需求与作用是什么，采用命名空间以后代码模块将产生哪些变化差异；
- 状态数据在页面刷新以后就丢失，如何才能强化用户体验，保持数据的复现；
- 什么样的场景需要实现数据的持久化，哪些数据又需要数据的持久化，是否可以实现指定数据的持久化；

vuex 虽然解决了任意组件的通讯需求但是其本身涉及的概念与知识点也不少，所谓有得有失，但是掌握好 vuex 的功能是进行 vue 项目的基石，所以让我们一步一步的开始了解它吧。
