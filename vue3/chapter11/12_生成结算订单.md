# 12.生成结算订单

结算订单页主要的内容涉及到收件人的选择、支付方式的确认、物流选择与购物商品清单的确认、优惠与发票信息选择以及买家信息留言等内容。这一页面的内容与很多子模块内容需要进行衔接，比如用户通讯录管理、物流配送与区域划分管理等。

![image-20220822180906029](http://qn.chinavanes.com/qiniu_picGo/image-20220822180906029.png)

## 1)收件人管理

用户购买商品一定会涉及到收件人地址操作的内容，而且很多的用户可能会拥有多个不同的通讯录地址，比如家庭地址、公司地址等，那么建议进行用户通讯录的统一管理，对于本次订单的收件人信息只需要进行选择操作即可，这样的操作流程与用户体验也比较顺畅。

一般情况收件人地址的管理会涉及到省、市、区三级联动操作，甚至是省、市、区、街道的四级联动处理，用户在选择省、市、区等信息以后可以再行输入具体的通讯信息。如果想要更完美的体现地理位置可以考虑和百度地址、高德地图等不同的地图开放平台进行结合，利用位置定位、选择、移动等方式进行用户位置信息的直观显示。

收件人地址在管理过程中还会要求输入用户名、手机号等信息，同样的也需要进行表单的验证操作。

一般情况用户可以设置一个默认地址为常用地址，这个地址信息在多个收件人地址列表显示时会涉及到排它性操作。因为需要将所有收件人地址先设置为非默认地址，然后再将某个收件人地址设置为默认地址，并且实现特殊样式的高亮显示区别。

## 2)支付方式确认

现在常见的支付方式其实包括很多，有中行、工行、农行、建行等独立的银行支付模式，有以微信、支付宝为典型的第三方支付，还有像 ping++这样的第四方支付模式的聚合支付。现在银行的独立支付已经应用的非常之少，绝大多数平台选择的都是微信、支付宝这样的第三方支付。至于 ping++这样的第四方聚合支付只有一些特殊的平台才会进行合作使用。

微信、支付宝这样的第三方支付平台的合作首先需要以企业身份与之洽谈并签订合作协议，确认其支付通道的合作费率，并且获取到商户号与商户密码等支付关系信息，然后再进行对应的接口对接。

结算订单页面并没有进行具体的支付操作，所以只需要先进行支付方式的选择即可。

## 3)物流选择与送货清单确认

江浙沪包邮，这句话相信绝大多数人都非常的熟悉。在进行商品购买的时候需要选择特定的物流，因为物流也需要有成本，是否包含在商品订单中也是一个问题，不同的物流其运送速度与价格都会产生变化，所以在结算订单页中可以思考物流方式的选择。

中通、圆通、申通、韵达是大家较为熟悉的三通一达，顺风、邮政、德邦、百世也是知名的快递公司，而不同的公司在区别服务价格的同时也提供了不同的服务品质，所以在进行物流选择以后还可以预估到送达时间。

为什么物流选择需要与送货清单结合查看呢？这是因为物流的价格会根据货品的数量、重量、区域等不同的因素而产生不同的服务价格。

## 4)优惠与发票信息选择

如果是个人购买商品很多的用户并不太会关注发票的内容，但是如果是公司购买需要报销流程处理的话，那么发票开具就是一个重要的内容，所以在结算订单页面也可能会提供开具发票的功能。开具普通发票填写的信息还是比较简单的，需要填写购买方的单位名称和纳税人识别号，每个纳税人识别号都是唯一的，也可以提供购买方的统一社会信用代码就可以，一般开具普通发票只需要提供这些信息就可以，也就是说有了购买方的单位名称和纳税人识别号就能开具发票。

除了发票信息以及商品本身的促销应用，有些平台还会提供优惠券等常见的促销策略，那么在结算订单页中如果有类似的优惠券内容的选择则需要根据商品的购买数量与价格进行动态获取，用户可以进行自行的选择，以产生最终不同的订单价格。

## 5)价格显示

最终需要用户确认的当然是订单的价格信息，一般会包含订单的原价、运费价格、活动优惠价、优惠券抵扣价以及订单最终现价，也就是实付金额，这些金额信息内容不要在前端进行计算，一定是通过后台实现数据的直接获取与显示，这是为了确保订单的时效性与安全性。
