# 10.注册登陆页

## 1)临时身份与正式身份的同时使用

想要将商品加入到购物车首先得明确是哪个用户进行的操作，那么，如何确认是哪个用户将商品加入购物车可以先进行用户登陆的处理。但是，如果没有进行用户的注册是无法实现用户登陆操作的，所以用户的注册登陆是一个相对整体的功能。

现在绝大多数的平台都实现的是先注册登陆再进行商品加入购物车的操作，但尚品汇电商平台仍旧支持匿名用户将商品加入到购物车的操作流程。如何在匿名的情况下将商品加入购物车，如何在登陆的情况下将商品加入购物车，如果用户先在匿名状态下将商品加入购物车，但随后又实现了用户登陆操作，那么匿名身份如何与正式的用户身份进行合并，并且查看到匿名身份添加到购物车的商品清单。这一系列的问题都是有关用户身份信息的基本流程。

对于匿名用户我想可以设置一个 tempUserId，也就是临时用户 ID，这就像是在派出所申请了一张临时身份证，当然用户的 ID 一定是唯一的。用户是否能够使用临时身份证进行商品的购买呢？就像拿着临时身份证是否能够坐火车一样，当然是可以的，因为临时身份证也能够确认用户的唯一性。如果用户进行了登陆操作，就相当于到派出所领取了正式的身份证，这时候临时身份证与正式身份证应该实现合并处理，最终以正式身份证为标准进行使用，那么是否还是可以进行商品的购买，一定也是可以的。就像正式身份证去坐火车一样更为的方便。在尚品汇电商平台中为了吸引更多的用户进行平台的操作就提供了匿名临时用户与登陆正式用户的两种处理方案。

在项目中可以将临时身份证 tempUserId 与正式身份证 userId 都利用状态管理器统一管理，甚至可以存储于本地缓存当中，在请求的二次封装拦截器中进行 headers 报文信息的一同传递即可，因为后台程序会自动判定，只要有正式身份证 userId 就以它为操作基础，如果没有的话则以临时身份证 tempUserId 为操作基础。

## 2)用户注册页

在进行用户注册的时候需要考虑的是表单的处理，而表单操作的一个基本功能就是表单的验证操作，如果使用 UI 框架一般会内置表单验证的操作，但如何因为 UI 等问题的需求，在没有使用 UI 框架的前提下则需要单独对用户注册页进行表单的验证操作，这时候可以考虑使用第三方插件进行实现，比如说 vee-validate。在进行表单验证的时候通常需要掌握字段级、自定义级以及整体表单级等不同的级别的验证处理。

为了用户登陆安全性考虑，还可以考虑使用图形验证码、手机验证等辅助手段进行用户身份的二次识别。为什么需要考虑用图形验证码、手机验证码等辅助验证手段，这是因为用户注册页的操作频率是非常高的一个页面，很多的平台为了引及用户会推出大量的优惠活动，但薅羊毛的用户群体可以注册大量的一次性用户进行平台的薅羊毛行动，为了尽可能避免这种情况，可以减少或者控制用户的注册频率，必须要真实手机号并且确认收到验证码以后才能进行用户的注册操作。

## 3)用户登陆

用户登陆比较简单，同样需要进行表单验证的操作处理，但这是平台内账号的登陆模式。现在很多的平台还支持第三方平台授权登陆，比如微信、微博、支付宝、QQ 等，但如果使用第三方授权登陆都需要在指定的开放平台进行合作项目的创建，利用第三方平台的开放接口进行授权登陆的功能处理。不过，这种操作模式一般只能获取到用户的基础信息，比如昵称、头像等内容，所以众多平台为了获取更详情的用户信息会设置“完善用户信息”的页面功能。
