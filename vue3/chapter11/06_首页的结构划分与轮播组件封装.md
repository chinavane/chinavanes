# 06.首页的结构划分与轮播组件封装

## 1)首页的结构划分

在视图目录views中已经设置了home首页的子目录，如果想要实现首页功能的完善可以先将首页的结构进行细化划分，导航分类、具有轮播图功能的列表信息、今日推荐、商品排行、猜你喜欢、楼层商品、品牌商标是块状结构的最好拆分。对应的这些内容都是home首页中特有的组成，所以如果将它们进行拆分的话并不需要将其放置于通用组件目录components中，只需要将其设置于当前home目录总即可，一般我们称之为页面组件。

```vue
	<!-- 导航分类 -->
	<TypeNav />
	<!-- 列表信息 -->
	<ListContainer />
	<!-- 今日推荐 -->
	<TodayRecommend />
	<!-- 商品排行 -->
	<Rank />
	<!-- 猜你喜欢 -->
	<Like />
	<!-- 楼层商品 -->
	<Floor />
	<!-- 品牌商标 -->
	<Brand />
```

<img src="http://qn.chinavanes.com/qiniu_picGo/image-20220608171623684.png" alt="image-20220608171623684" style="zoom:50%;" />

## 2)轮播组件封装

通过分析可以确认除了在列表信息中有轮播效果的展示，在楼层商品展示中同样也有对应的轮播效果渲染，这就意味着轮播功能应该是一个需复用的公共组件对象，可以放置于components目录下。而想要实现轮播功能则可以利用第三方插件swiper(http://www.swiper.com.cn)的辅助以增强效果与提高开发的速度。这也意味着需要花费一定的时间精力对第三方插件swiper进行了解与学习，而且可能还需要在其基础上进行更进一步的二次封装以满足项目特定需求的目标。所以对于轮播组件的封装需要强化的能力与步骤主要包括：

- 根据需求查找适合的第三方插件或者类库；
- 具有独立的文档阅读能力与示例的运行调试能力；
- 可以将第三方插件类库进行当前项目内容的简单集成；
- 根据需求设置一些具体的属性或者绑定特定的事件；
- 能够根据实际情况抽离动态部分设置为属性进行参数传化传递；

## 3)模拟数据的环境创建

在项目开发的时候是否所有数据都已经提供有效后端接口？想来是未必的。遇到如此情况应该怎么办？可以构建模拟数据接口。它的操作流程同样需要经历搭建模拟接口服务器、编写模拟数据路由配置、创建模拟数据请求实例或者重新封装模拟数据请求文件、定义模拟数据请求接口函数、进行模拟数据请求获取数据。

搭建模拟接口服务器：

- [mockjs](http://mockjs.com/)、[vite-plugin-mock](https://github.com/vbenjs/vite-plugin-mock)依赖模块的安装
- 在vite.config.ts中配置 mock以便搭建 mock 服务器

编写模拟数据路由配置：

- 在项目根目录创建mock目录
- 编写模拟数据路由配置并返回模拟数据内容
- 测试模拟数据接口

创建模拟数据请求实例或者重新封装模拟数据请求文件，这是因为模拟数据的请求地址与真实接口的请求地址并不相同，包括地址前缀的内容：

- 可以在请求的二次封装基础上构建第二个实例对象
- 可以将请求的二次封装进行简单复制粘贴并改造成模拟数据请求实例

定义模拟数据请求接口函数：

- 在接口封装模块进行模拟数据的接口请求函数定义
- 需要区别真实接口数据的请求实例，改用模拟数据请求接口的实例对象

进行模拟数据请求获取数据：

- 在首页中进行模拟数据请求接口的调用
- 将获取到的数据以属性传递的方式传送给轮播图组件
- 需要注意轮播图组件图片显示问题，因为 vite 脚手架没法打包异步加载的图片
- 可以将模拟数据的 images 图片放入 public 目录下，public 目录默认会被打包，最终解决模拟数据图片的显示问题

